import{j as t,i as k,c as R}from"./index-JBMyroTg.js";import{r as o}from"./vendor-C8lAA81b.js";import{l as N}from"./index-CZ9vExK5.js";import{T as P,e as w,f,C as v,h as B,K as $,Y as T,Z as z,j as u,u as A,B as H}from"./antd-7IfSoTVm.js";const x=[{id:"contractor",name:"Thẻ Nhà Thầu (Contractor)",bgImage:"/assets/cards/contractor-bg.png",textColor:"#333333",numberPosition:{bottom:"30mm"}},{id:"visitor",name:"Thẻ Khách (Visitor)",bgImage:"/assets/cards/visitor-bg.png",textColor:"#333333",numberPosition:{bottom:"15mm"}},{id:"candidate",name:"Thẻ Ứng Viên (Candidate)",bgImage:"/assets/cards/candidate-bg.png",textColor:"#333333",numberPosition:{bottom:"20mm"}},{id:"restricted",name:"Khu Vực Giới Hạn (Restricted)",bgImage:"/assets/cards/restricted-bg.png",textColor:"#333333",numberPosition:{bottom:"25mm"}},{id:"backside",name:"Mặt Sau Thẻ (Quy định)",isBackSide:!0,bg:{portrait:"/assets/cards/backside-v.png",landscape:"/assets/cards/backside-h.png"}}],b=({template:e,serialNumber:g,orientation:i="portrait"})=>{var a;const d="85.6mm",r="54mm",h=i==="portrait"?r:d,s=i==="portrait"?d:r,l=e.isBackSide&&e.bg?e.bg[i]:e.bgImage;return t.jsx("div",{className:"card-item",style:{width:h,height:s,backgroundImage:`url("${l}")`,backgroundSize:"100% 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative",boxSizing:"border-box",overflow:"hidden",backgroundColor:"#fff",border:"1px solid #eee"},children:!e.isBackSide&&t.jsx("div",{style:{position:"absolute",width:"100%",textAlign:"center",fontSize:"18px",fontWeight:"400",color:e.textColor,bottom:((a=e.numberPosition)==null?void 0:a.bottom)||"25mm",left:0,fontFamily:"Arial, sans-serif"},children:g})})},{Title:D,Text:m}=P,L=()=>{const[e,g]=o.useState(x[0].id),[i,d]=o.useState(1),[r,h]=o.useState(1),[s,l]=o.useState("portrait"),a=o.useRef(null),c=x.find(n=>n.id===e),p=c.id==="backside",C=n=>{g(n),l("portrait")},S=N.useReactToPrint({contentRef:a}),j=s==="portrait"?"54mm":"85.6mm",y=s==="portrait"?"85.6mm":"54mm";return t.jsxs("div",{style:{padding:"0 10px"},children:[t.jsxs(D,{level:3,children:[t.jsx(k,{})," In Thẻ Chuyên Dụng"]}),t.jsxs(w,{gutter:[24,24],children:[t.jsx(f,{xs:24,md:10,lg:8,children:t.jsx(v,{title:"Cấu hình in",variant:"borderless",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:t.jsxs(B,{vertical:!0,gap:"large",children:[t.jsxs("div",{children:[t.jsx(m,{strong:!0,children:"Loại thẻ:"}),t.jsx($,{style:{width:"100%",marginTop:5},value:e,onChange:C,options:x.map(n=>({value:n.id,label:n.name}))})]}),p?t.jsxs("div",{children:[t.jsx(m,{strong:!0,children:"Số lượng thẻ cần in:"}),t.jsx(T,{min:1,max:100,value:r,onChange:h,style:{width:"100%",marginTop:5}}),t.jsxs("div",{style:{marginTop:15},children:[t.jsxs(m,{strong:!0,children:[t.jsx(z,{})," Hướng mặt sau:"]}),t.jsxs(u.Group,{block:!0,style:{marginTop:5},value:s,onChange:n=>l(n.target.value),buttonStyle:"solid",children:[t.jsx(u.Button,{value:"portrait",children:"Dọc"}),t.jsx(u.Button,{value:"landscape",children:"Ngang"})]})]})]}):t.jsxs("div",{children:[t.jsx(m,{strong:!0,children:"Số thẻ hiển thị (SĐT/Số hiệu):"}),t.jsx(T,{min:1,value:i,onChange:d,size:"large",style:{width:"100%",marginTop:5}})]}),t.jsx(A,{title:"Thông tin lệnh in",description:p?`In ${r} bản mặt sau (${s==="portrait"?"Dọc":"Ngang"})`:`In thẻ ID số: ${i}`,type:"info",showIcon:!0}),t.jsx(H,{type:"primary",size:"large",icon:t.jsx(R,{}),onClick:S,block:!0,children:"BẮT ĐẦU IN"})]})})}),t.jsx(f,{xs:24,md:14,lg:16,children:t.jsx(v,{title:"Preview",variant:"borderless",style:{background:"#333",minHeight:"450px"},styles:{body:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"350px"}},children:t.jsx(b,{template:c,serialNumber:i,orientation:s})})})]}),t.jsx("div",{style:{display:"none"},children:t.jsxs("div",{ref:a,className:"print-area",children:[t.jsx("style",{children:`
            @media print {
              @page { size: ${j} ${y}; margin: 0; }
              body { margin: 0; padding: 0; }
              /* Class này quan trọng để ngắt trang đúng */
              .print-item { page-break-after: always; display: block; width: ${j}; height: ${y}; }
            }
          `}),p?Array.from({length:r}).map((n,I)=>t.jsx("div",{className:"print-item",children:t.jsx(b,{template:c,orientation:s})},I)):t.jsx("div",{className:"print-item",children:t.jsx(b,{template:c,serialNumber:i,orientation:s})})]})})]})};export{L as default};
