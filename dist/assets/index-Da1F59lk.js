import{j as e,b as w,R as I}from"./index-JBMyroTg.js";import{r as n,R as T}from"./vendor-C8lAA81b.js";import{u as P}from"./useEmployees-D0hjL4_K.js";import{I as H,_ as D,e as j,f as o,C as c,g as p,h as F,c as L,E as M,T as O}from"./antd-7IfSoTVm.js";import{R as m,B as _,C as k,X as z,Y as N,T as v,L as b,a as S,P as U,b as W,c as $}from"./charts-BTGEPdTy.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},G=function(l,i){return n.createElement(H,D({},l,{ref:i,icon:K}))},X=n.forwardRef(G);const Y=({dataSource:t})=>{const l=t.length,i=t.filter(a=>a.employee_status==="Active").length,y=t.filter(a=>a.employee_status==="Resign").length,d=[{title:"Total Employees",value:l,icon:e.jsx(w,{}),color:"#1890ff"},{title:"Active Employees",value:i,icon:e.jsx(I,{}),color:"#52c41a"},{title:"Resigned",value:y,icon:e.jsx(X,{}),color:"#ff4d4f"}];return e.jsx(j,{gutter:[16,16],style:{marginBottom:24},children:d.map((a,h)=>e.jsx(o,{xs:24,sm:8,children:e.jsx(c,{variant:"borderless",hoverable:!0,style:{boxShadow:"0 2px 8px rgba(0,0,0,0.05)",borderRadius:"12px"},children:e.jsx(p,{title:e.jsxs(F,{align:"center",gap:8,children:[T.cloneElement(a.icon,{style:{color:a.color}}),e.jsx("span",{style:{fontWeight:500,color:"#8c8c8c"},children:a.title})]}),value:a.value,styles:{content:{color:a.color,fontWeight:700}}})})},h))})},R=["#0088FE","#00C49F","#FFBB28","#FF8042"],C=300,q=()=>{const[t,l]=n.useState([]),[i,y]=n.useState(!0),[d,a]=n.useState({total:0,thisMonth:0});n.useEffect(()=>{(async()=>{try{const f=await(await fetch("http://localhost:8000/api/print-stats")).json();if(Array.isArray(f)){l(f);const A=f.reduce((g,E)=>g+(E.total||0),0),B=new Date().toISOString().slice(0,7),u=f.find(g=>g.month===B);a({total:A,thisMonth:(u==null?void 0:u.total)||0})}}catch(s){console.error("Lỗi tải thống kê:",s)}finally{y(!1)}})()},[]);const h=n.useMemo(()=>{if(t.length===0)return[];const r=t.reduce((s,x)=>(s.Normal+=x.Normal||0,s.Pregnancy+=x.Pregnancy||0,s["Has Baby"]+=x["Has Baby"]||0,s),{Normal:0,Pregnancy:0,"Has Baby":0});return[{name:"Normal Card",value:r.Normal},{name:"Pregnancy",value:r.Pregnancy},{name:"Has Baby",value:r["Has Baby"]}].filter(s=>s.value>0)},[t]);return i?e.jsx("div",{style:{textAlign:"center",padding:50},children:e.jsx(L,{size:"large"})}):t.length===0?e.jsx(M,{description:"No print data available"}):e.jsxs("div",{style:{padding:"20px 0"},children:[e.jsxs(j,{gutter:16,style:{marginBottom:24},children:[e.jsx(o,{span:12,children:e.jsx(c,{variant:"borderless",style:{background:"#e6f7ff"},children:e.jsx(p,{title:"Total cards printed (Full time)",value:d.total,valueRender:r=>e.jsx("span",{style:{color:"#1890ff",fontSize:24,fontWeight:600},children:r})})})}),e.jsx(o,{span:12,children:e.jsx(c,{variant:"borderless",style:{background:"#f6ffed"},children:e.jsx(p,{title:"Cards printed this month",value:d.thisMonth,valueRender:r=>e.jsx("span",{style:{color:"#52c41a",fontSize:24,fontWeight:600},children:r})})})})]}),e.jsxs(j,{gutter:24,children:[e.jsx(o,{xs:24,lg:14,children:e.jsx(c,{title:"Monthly printed statistics",variant:"borderless",children:e.jsx("div",{style:{width:"100%",height:C},children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(_,{data:t,children:[e.jsx(k,{strokeDasharray:"3 3"}),e.jsx(z,{dataKey:"month"}),e.jsx(N,{}),e.jsx(v,{}),e.jsx(b,{}),e.jsx(S,{dataKey:"Worker",stackId:"a",fill:"#8884d8"}),e.jsx(S,{dataKey:"Staff",stackId:"a",fill:"#82ca9d"})]})})})})}),e.jsx(o,{xs:24,lg:10,children:e.jsx(c,{title:"Card type ratio (Special)",variant:"borderless",children:e.jsx("div",{style:{width:"100%",height:C},children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(U,{children:[e.jsx(W,{data:h,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:4,dataKey:"value",label:!0,children:h.map((r,s)=>e.jsx($,{fill:R[s%R.length]},`cell-${s}`))}),e.jsx(v,{}),e.jsx(b,{})]})})})})})]})]})},{Title:J,Text:Q}=O,ae=()=>{const{employees:t,fetchEmployees:l,isLoaded:i}=P();return n.useEffect(()=>{i||l()},[]),e.jsxs("div",{style:{padding:"0 8px"},children:[e.jsxs("div",{style:{marginBottom:12,marginTop:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(J,{level:4,style:{margin:0,color:"#001529"},children:"Dashboard Overview"}),e.jsx(Q,{type:"secondary",style:{fontSize:"12px"},children:"System Status: Online"})]}),e.jsx("div",{style:{marginBottom:12},children:e.jsx(Y,{dataSource:t})}),e.jsx("div",{children:e.jsx(q,{})})]})};export{ae as default};
